<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accepted Papers - Bridge between Artificial Intelligence and Law @ AAAI26</title>
  <meta name="theme-color" content="#0b3d91" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' x='0.1em' font-size='80'%3E⚖️%3C/text%3E%3C/svg%3E" />
  <style>
    /* --- SHARED CSS --- */
    :root { --bg: #ffffff; --ink: #0b1222; --muted: #3b4558; --brand: #0b3d91; --brand-ink: #0a2e6d; --card: #f6f8fc; --disabled: #c0c6d4; }
    body { font-family: "Times New Roman", Times, Georgia, serif; color: var(--ink); background: var(--bg); line-height: 1.5; margin:0; }
    .container { max-width: 980px; margin: 0 auto; padding: 0 20px; }
    
    /* --- HEADER & NAVIGATION (Updated for Mobile) --- */
    header { position: sticky; top: 0; z-index: 10; backdrop-filter: saturate(1.2) blur(6px); background: color-mix(in srgb, var(--bg) 88%, transparent); border-bottom: 1px solid #e5e8ef; }
    .nav { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; flex-wrap: wrap; }
    
    .brand { font-variant: small-caps; letter-spacing: .03em; font-weight: 700; color: var(--brand); display: flex; align-items: center; gap: 10px; font-size: 18px; }
    .brand-tag { font-size: 14px; font-weight: 500; color: var(--muted); }

    /* Desktop Navigation */
    .nav-links { display: flex; align-items: center; }
    .nav-links a { margin-left: 24px; font-size: 17px; color: var(--muted); text-decoration: none; white-space: nowrap; transition: color 0.2s; }
    .nav-links a:hover { color: var(--brand); font-weight: 600; }
    .nav-links a.active { color: var(--brand); font-weight: 700; }

    /* Mobile Menu Logic (Hidden Checkbox Hack) */
    .nav-check { display: none; }
    .nav-btn { display: none; }

    /* --- MOBILE NAV STYLES (< 960px) --- */
    @media (max-width: 960px) {
      .nav { padding: 10px 0; }
      
      .nav-btn { display: inline-block; cursor: pointer; padding: 5px; }
      .nav-btn span { display: block; width: 25px; height: 3px; background-color: var(--brand); margin: 5px 0; border-radius: 2px; transition: 0.3s; }

      .brand-tag { display: none; } 

      .nav-links {
        display: block;
        width: 100%;
        max-height: 0; 
        overflow: hidden;
        transition: max-height 0.3s ease-in-out;
        background: var(--bg);
        border-top: 1px solid transparent;
      }

      #nav-check:checked ~ .nav-links {
        max-height: 300px; 
        border-top: 1px solid #e5e8ef;
        padding-bottom: 15px;
        margin-top: 10px;
      }

      .nav-links a {
        display: block;
        margin: 0;
        padding: 12px 5px; 
        font-size: 18px; 
        border-bottom: 1px solid #f0f0f0;
        text-align: center; 
      }
      .nav-links a:last-child { border-bottom: none; }
    }
      
    /* --- PAGE CONTENT STYLES --- */
    section { padding: 40px 0; }
    .card { background: var(--card); border: 1px solid #e8ecf5; border-radius: 14px; padding: 24px; min-height: 400px; }
      
    /* Paper Specific Styles */
    .paper-controls { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin: 20px 0 16px; }
    .input, .select { font-family: inherit; font-size: 14px; padding: 10px 12px; border-radius: 10px; border: 1px solid #dbe3f3; background: #fff; outline: none; }
    .input { flex: 1; min-width: 200px; }
    .paper-list { display:grid; gap: 12px; margin-top: 12px; }
    .paper { background:#fff; border-radius: 14px; box-shadow: 0 0 0 1px #e5e8ef; padding: 16px; }
    .paper-title { font-size: 18px; margin: 0 0 6px; color: var(--ink); font-weight: 600; }
    .paper-meta { font-size: 14px; color: var(--muted); margin: 0 0 10px; }
    .paper-actions { display:flex; gap:8px; flex-wrap:wrap; }
    
    .btn { display:inline-flex; align-items:center; justify-content:center; padding: 6px 12px; border-radius: 8px; border: 1px solid #c9d7f2; text-decoration:none; font-size: 13px; color: var(--brand); background: #fff; cursor: pointer; font-family: sans-serif; }
    .btn:hover { background: #f2f7ff; border-color: var(--brand); }
    
    /* Modal Styles */
    .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 100; justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 20px; border-radius: 12px; width: 90%; max-width: 600px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); position: relative; display: flex; flex-direction: column; gap: 10px; }
    .modal-header { font-weight: bold; font-size: 16px; margin-bottom: 5px; color: var(--brand); }
    .modal-textarea { width: 100%; height: 150px; font-family: monospace; font-size: 12px; padding: 10px; border: 1px solid #e5e8ef; border-radius: 8px; resize: vertical; box-sizing: border-box; background: #fafbfc; }
    .modal-actions { display: flex; justify-content: flex-end; gap: 10px; }
    .modal-actions .btn { min-width: 80px; }

    footer { margin: 40px 0 60px; font-size: 14px; color: var(--muted); }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        AI-LAW @ AAAI 2026 <span class="brand-tag">• Singapore, January 21, 2026</span>
      </div>

      <input type="checkbox" id="nav-check" class="nav-check">
      <label for="nav-check" class="nav-btn">
        <span></span>
        <span></span>
        <span></span>
      </label>

      <nav class="nav-links">
        <a href="./index.html">Home</a>
        <a href="./program.html">Schedule</a>
        <a href="./papers.html" class="active">Accepted Papers</a>
        <a href="./CFP.html">CFP</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section>
      <div class="card">
        <h2 style="font-size:26px; margin-top:0;">Accepted Papers</h2>
          
        <div class="paper-controls">
          <div style="display:flex; gap:10px; flex:1; flex-wrap:wrap;">
            <input id="paperSearch" class="input" placeholder="Search by title or author..." aria-label="Search papers" />
            <select id="paperType" class="select" aria-label="Filter by type">
              <option value="">All types</option>
            </select>
          </div>
          <div style="font-size:13px; color:#666;"><span id="paperCount">0</span> papers found</div>
        </div>

        <div id="paperList" class="paper-list" aria-live="polite">
            <div style="text-align:center; color:#999; padding:20px;">Loading papers...</div>
        </div>
        <p id="paperError" style="display:none; color:#b00020; font-size:14px; margin-top:10px;"></p>
      </div>
    </section>
  </main>

  <div id="bibtexModal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">Cite this paper (BibTeX)</div>
      <textarea id="bibtexContent" class="modal-textarea" readonly></textarea>
      <div class="modal-actions">
        <button class="btn" onclick="closeModal()">Close</button>
        <button class="btn" id="copyBtn" onclick="copyBibtex()">Copy</button>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div>© 2025-2026 AI-LAW Bridge</div>
    </div>
  </footer>

  <script>
    const PAPER_JSON_URL = "./assets/papers.json";
    const paperListEl = document.getElementById("paperList");
    const paperErrorEl = document.getElementById("paperError");
    const paperCountEl = document.getElementById("paperCount");
    const searchEl = document.getElementById("paperSearch");
    const typeEl = document.getElementById("paperType");
    
    // Modal Elements
    const modalEl = document.getElementById("bibtexModal");
    const modalContentEl = document.getElementById("bibtexContent");
    const copyBtnEl = document.getElementById("copyBtn");

    let allPapers = [];

    function safeText(x) { return (x ?? "").toString().trim(); }

    function makeLink(label, url) {
      if (!url || url.trim() === "") return null;
      const a = document.createElement("a");
      a.className = "btn";
      a.textContent = label;
      a.href = url;
      a.target = "_blank";
      return a;
    }

    // Modal Logic
    function openModal(bibtexText) {
      modalContentEl.value = bibtexText || "No BibTeX provided for this item.";
      modalEl.style.display = "flex";
      copyBtnEl.textContent = "Copy"; 
      copyBtnEl.style.background = "#fff";
      copyBtnEl.style.color = "var(--brand)";
    }

    function closeModal(e) {
      if (e && e.target !== modalEl && e.target.tagName !== "BUTTON") return; 
      modalEl.style.display = "none";
    }

    function copyBibtex() {
      modalContentEl.select();
      modalContentEl.setSelectionRange(0, 99999); 
      navigator.clipboard.writeText(modalContentEl.value).then(() => {
        copyBtnEl.textContent = "Copied!";
        copyBtnEl.style.background = "var(--brand)";
        copyBtnEl.style.color = "#fff";
        setTimeout(() => {
             copyBtnEl.textContent = "Copy";
             copyBtnEl.style.background = "#fff";
             copyBtnEl.style.color = "var(--brand)";
        }, 2000);
      });
    }

    function renderPapers() {
      const q = safeText(searchEl.value).toLowerCase();
      const t = safeText(typeEl.value);
      const filtered = allPapers.filter(p => {
        return (!q || safeText(p.title).toLowerCase().includes(q) || safeText(p.authors).toLowerCase().includes(q)) &&
               (!t || safeText(p.type) === t);
      });

      paperCountEl.textContent = filtered.length.toString();
      paperListEl.innerHTML = "";
      if(filtered.length === 0) { paperListEl.innerHTML = "<div style='color:#999; padding:10px;'>No papers match your search.</div>"; return; }

      for (const p of filtered) {
        const div = document.createElement("div"); div.className = "paper";
          
        const h3 = document.createElement("h3"); h3.className = "paper-title"; h3.textContent = p.title;
        div.appendChild(h3);

        const meta = document.createElement("p"); meta.className = "paper-meta";
        meta.innerHTML = `<strong>${safeText(p.authors)}</strong><br>${safeText(p.type)}` + (p.pages ? ` • ${p.pages}` : "");
        div.appendChild(meta);

        const acts = document.createElement("div"); acts.className = "paper-actions";
        
        const btnPDF = makeLink("PDF", p.pdf_url);
        if(btnPDF) acts.appendChild(btnPDF);

        const btnPoster = makeLink("Poster", p.poster_url);
        if(btnPoster) acts.appendChild(btnPoster);
          
        if (p.bibtex) {
            const bibBtn = document.createElement("button");
            bibBtn.className = "btn";
            bibBtn.textContent = "Cite";
            bibBtn.onclick = () => openModal(p.bibtex);
            acts.appendChild(bibBtn);
        }

        div.appendChild(acts);
        paperListEl.appendChild(div);
      }
    }

    async function init() {
      try {
        const resp = await fetch(PAPER_JSON_URL);
        if (!resp.ok) throw new Error("404 Not Found");
        allPapers = await resp.json();
          
        const types = Array.from(new Set(allPapers.map(p => p.type).filter(Boolean))).sort();
        types.forEach(ty => { const o = document.createElement("option"); o.value = ty; o.textContent = ty; typeEl.appendChild(o); });
          
        renderPapers();
        searchEl.addEventListener("input", renderPapers);
        typeEl.addEventListener("change", renderPapers);
      } catch (e) {
        paperErrorEl.style.display = "block";
        paperErrorEl.textContent = "Error loading ./assets/papers.json. Please ensure the file exists.";
        paperListEl.innerHTML = "";
      }
    }
    init();
  </script>
</body>
</html>